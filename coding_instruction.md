## 스파이더 코딩

- 각 레코드에 맞는 spider 를 코딩하는것이 목적이다. bizsup/spiders/ 아래에 사이트코드와 같은 이름의 spider.py 파일을 코딩해 주면 된다.
- 샘플로 이미 만들어진 biszup/spiders/gbsa.py 를 참고해서 만들면 된다.
- 대부분의 기능은 이미 base.py에 정의 되어 있으므로 참고한다.
- {site_code}.py에 해당하는 spider 코드만 작성하고 그외 다른 코드 파일은 수정하거나 변경해서는 안된다.
- conf/{site_code}.json 파일에 페이지 네이션에 대해 초보 개발자가 검색해 놓은 내용이 있으니 참고할 것. 항상 맞지는 않으므로 테스트 해봐서 맞지 않으면 다시 만들어야 함.
- conf/{site_code}.txt 파일에는 items_selector, details_page_main_content_selector, attachment_links_selector 에 대해 초보 개발자가 검색해 놓은 내용이 있으니 참고할 것. 항상 맞지는 않으니 반드시 확인해 볼것.
- items_selector 는 화면에 보이는 각 아이템의 타이틀 텍스트를 자손 엘레멘트로 갖는 셀렉터여야 한다.  ```title = item.css(" *::text").getall()``` 같은 방식으로 사용되므로 타이틀이 검색되는지 확인한다.

## 코드 테스트 실행

- 스파이더 코드가 만들어지면 4페이지까지 가져오도록 테스트 한다.
- 실행시 에러가 발생하면 각 셀렉터를 다시 확인해야 한다.
- playwright 나 scrapy shell 을 사용하여 셀렉터가 실제 존재하는 지 확인한다.
- 없으면 코드 작성을 다시 한다.

## 실행 후 검증

- 에러없이 코드가 실행되었으면 다음을 확인하여 결과가 올바른지 검증한다.
- output/{site_code} 폴더가 생성되고 거기에 4페이지 분량의 타이틀 디렉토리가 생성되었는지 확인
- 각 타이틀 디렉토리에 attachments 디렉토리와 content.md 파일이 생성되었는지 확인.
- content.md에 공고 내용이 저장되어 있는지 확인.
- attachemts 디렉토리에 첨부파일이 다운로드 되어 저장되었는지 확인.
- 첨부파일의 한글명이 제대로 생성되었는지 확인. 가끔 엔코디이 잘못되는 경우가 있음.
- 첨부파일의 크기가 0 bytes 거나 너무 적으면 실제 파일이 저장된 것이 아니라 html에러 페이지가 저장된 경우일 수 있으니 확인.
- 모든 첨부파일의 크기가 같은 경우는 한 파일을 다운 받아서 이름만 다르게 저장한 경우일 수 있으니 확인.
